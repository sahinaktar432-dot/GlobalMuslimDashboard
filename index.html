<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Al-Alsa | Global Ummah</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        :root { --emerald: #043927; --gold: #c5a021; --bg: #f2f2f7; --white: #ffffff; --ai-green: #2ecc71; }
        
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: #121212; line-height: 1.4; }

        /* --- Navigation --- */
        nav { background: var(--emerald); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .logo { font-weight: 900; font-size: 1.5rem; color: var(--gold); letter-spacing: -0.5px; }

        /* --- Overlays --- */
        #fullMenu, #surahPanel, #quizPanel {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--emerald); z-index: 5000; display: none; flex-direction: column;
            overflow-y: auto; padding: 60px 25px;
        }
        .menu-item { color: white; text-decoration: none; font-size: 1.6rem; margin: 12px 0; font-weight: 800; cursor: pointer; transition: 0.2s; }
        .close-btn { position: absolute; top: 20px; right: 25px; color: white; font-size: 2.2rem; cursor: pointer; }

        /* --- Hero --- */
        .hero { background: linear-gradient(180deg, var(--emerald) 0%, #0a5c41 100%); color: white; padding: 50px 20px; text-align: center; border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; }
        .timer-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px; }
        .timer-card { background: rgba(255,255,255,0.08); padding: 18px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.15); backdrop-filter: blur(5px); }
        .timer-card small { font-size: 0.7rem; font-weight: 800; text-transform: uppercase; color: rgba(255,255,255,0.7); display: block; margin-bottom: 4px; }
        .timer-card b { font-size: 1.1rem; color: var(--gold); font-weight: 900; }

        /* --- Layout --- */
        .container { padding: 20px; max-width: 650px; margin: -40px auto 0; position: relative; z-index: 10; }
        section { background: var(--white); padding: 25px; border-radius: 28px; margin-bottom: 20px; box-shadow: 0 12px 35px rgba(0,0,0,0.05); }
        h2 { font-size: 1.25rem; font-weight: 900; color: var(--emerald); margin-bottom: 18px; display: flex; align-items: center; gap: 10px; }

        /* --- Shahin AI --- */
        #voice-trigger { 
            position: fixed; bottom: 30px; right: 25px; background: var(--ai-green); color: white; border: none; 
            padding: 14px 24px; border-radius: 50px; box-shadow: 0 12px 30px rgba(46, 204, 113, 0.4); 
            cursor: pointer; z-index: 8000; display: flex; align-items: center; gap: 12px; font-weight: 800; font-size: 0.9rem;
        }
        #ai-status { 
            position: fixed; bottom: 95px; right: 25px; background: white; padding: 20px; border-radius: 24px; 
            font-weight: 700; font-size: 0.9rem; box-shadow: 0 15px 40px rgba(0,0,0,0.2); 
            display: none; z-index: 8000; border-left: 5px solid var(--ai-green); width: 260px;
        }

        /* --- 99 Names --- */
        .names-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .name-box { background: #fbfbfd; padding: 16px; border-radius: 20px; text-align: center; border: 1px solid #f0f0f5; transition: 0.3s; }
        .name-box .ar { font-family: 'Amiri'; font-size: 1.6rem; color: var(--emerald); display: block; margin-bottom: 4px; }
        .name-box .en { font-size: 0.75rem; font-weight: 800; color: var(--gold); text-transform: uppercase; letter-spacing: 0.5px; }

        /* --- Wisdoms --- */
        .quote-scroll { height: 350px; overflow-y: auto; padding-right: 8px; }
        .q-card { padding: 20px 0; border-bottom: 1px solid #f0f0f5; }
        .q-card p { font-size: 0.95rem; font-weight: 600; color: #2c3e50; line-height: 1.5; margin-bottom: 8px; }
        .q-card span { font-size: 0.7rem; color: var(--gold); font-weight: 900; text-transform: uppercase; }

        /* --- Quran List --- */
        .surah-card { background: rgba(255,255,255,0.08); padding: 18px; border-radius: 20px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .surah-card b { color: var(--gold); font-size: 1.1rem; display: block; margin-bottom: 8px; font-weight: 800; }
        audio { width: 100%; height: 36px; filter: invert(0.9); opacity: 0.8; }

        /* --- Utilities --- */
        .mission-btn { width: 100%; padding: 18px; margin-bottom: 12px; border-radius: 20px; border: none; background: #f2f2f7; font-weight: 800; color: var(--emerald); cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: 0.3s; }
        .mission-btn.done { background: #34c759; color: white; }
    </style>
</head>
<body>

    <div id="ai-status"></div>
    <button id="voice-trigger" onclick="startVoiceAI()">
        <i class="fas fa-microphone-lines"></i> SHAHIN AI
    </button>

    <nav>
        <div class="logo">AL-ALSA</div>
        <div style="display: flex; gap: 12px; align-items: center;">
            <div style="font-weight: 900; background: var(--gold); color: #000; padding: 6px 14px; border-radius: 14px; font-size: 0.85rem; box-shadow: 0 4px 10px rgba(197, 160, 33, 0.3);">ü™ô <span id="coinCount">0</span></div>
            <div onclick="toggleMenu()" style="color:white; cursor:pointer; padding: 5px;"><i class="fas fa-bars-staggered" style="font-size: 1.4rem;"></i></div>
        </div>
    </nav>

    <div id="fullMenu">
        <div class="close-btn" onclick="toggleMenu()">√ó</div>
        <div id="userNameDisplay" style="color: var(--gold); font-size: 1rem; font-weight: 900; text-align: center; margin-bottom: 30px;"></div>
        
        <div class="menu-item" id="loginBtn" onclick="handleGoogleLogin()"><i class="fab fa-google"></i> Google Login</div>
        
        <div class="menu-item" onclick="openSurahs()"><i class="fas fa-headphones"></i> Listen Quran</div>
        <div class="menu-item" onclick="openQuiz()"><i class="fas fa-brain"></i> Islamic Quiz</div>
        
        <div class="menu-item" id="logoutBtn" onclick="handleLogout()" style="display:none; color: #ff3b30; margin-top: 40px; font-size: 1.2rem;"><i class="fas fa-power-off"></i> Logout</div>
    </div>

    <div id="surahPanel">
        <div class="close-btn" onclick="closeSurahs()">√ó</div>
        <h2 style="color:var(--gold); margin-bottom: 30px; justify-content: center;">Noble Quran</h2>
        <div id="surahList"></div>
    </div>
    
    <div id="quizPanel">
        <div class="close-btn" onclick="closeQuiz()">√ó</div>
        <h2 style="color:var(--gold); justify-content: center;">Quiz Challenge</h2>
        <div id="quizBox" style="margin-top:40px;">
            <p id="questionText" style="color:white; font-size:1.3rem; font-weight:800; text-align:center; margin-bottom:25px;"></p>
            <div id="optionsContainer"></div>
        </div>
    </div>

    <div class="hero">
        <h1 style="font-family: 'Amiri'; font-size: 2.8rem; color: var(--gold); text-shadow: 0 4px 10px rgba(0,0,0,0.2);">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸáŸê</h1>
        <p style="font-weight: 800; letter-spacing: 1px; font-size: 0.8rem; opacity: 0.9;">THE DIGITAL COMPANION FOR THE UMMAH</p>
        <div class="timer-row">
            <div class="timer-card"><small>Ramadan 2026</small><b id="ramadanTimer">--d --h</b></div>
            <div class="timer-card"><small>Friday Prayer</small><b id="jummahTimer">--d --h</b></div>
        </div>
    </div>

    <div class="container">
        <section>
            <h2><i class="fas fa-user-circle"></i> Developer</h2>
            <p style="font-size: 0.95rem; font-weight: 600; color: #444; border-left: 4px solid var(--gold); padding-left: 15px;">I am <b>Shahin Aktar</b>, a 17-year-old visionary developer. <b>Al-Alsa</b> is my mission to blend high-end technology with Islamic values for the Global Ummah.</p>
        </section>

        <section id="missions">
            <h2><i class="fas fa-check-double"></i> Salah Tracker</h2>
            <button class="mission-btn" id="btn-fajr" onclick="complete(this, 'fajr')">FAJR <span>+1 ü™ô</span></button>
            <button class="mission-btn" id="btn-dhuhr" onclick="complete(this, 'dhuhr')">DHUHR <span>+1 ü™ô</span></button>
            <button class="mission-btn" id="btn-asr" onclick="complete(this, 'asr')">ASR <span>+1 ü™ô</span></button>
            <button class="mission-btn" id="btn-maghrib" onclick="complete(this, 'maghrib')">MAGHRIB <span>+1 ü™ô</span></button>
            <button class="mission-btn" id="btn-isha" onclick="complete(this, 'isha')">ISHA <span>+1 ü™ô</span></button>
        </section>

        <section>
            <h2><i class="fas fa-star"></i> 99 Names of Allah</h2>
            <div class="names-grid" id="namesGrid"></div>
        </section>

        <section>
            <h2><i class="fas fa-book-open"></i> 100 Wisdoms & Verses</h2>
            <div class="quote-scroll" id="quoteList"></div>
        </section>
    </div>

    <script>
        // --- 1. FIREBASE CONFIGURATION (Must replace with YOUR keys for Login to work) ---
        // Instructions: Go to Firebase Console > Project Settings > General > SDK Setup > CDN
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY_HERE",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID"
        };
        
        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        // Login Logic
        function handleGoogleLogin() {
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    const user = result.user;
                    updateUI(user);
                    aiResponse("Welcome back, " + user.displayName);
                }).catch((error) => {
                    console.error("Login Failed:", error);
                    alert("Login failed: Check Firebase Console configuration.");
                });
        }

        function handleLogout() {
            firebase.auth().signOut().then(() => {
                updateUI(null);
                aiResponse("Logged out successfully.");
            });
        }

        function updateUI(user) {
            const nameDisplay = document.getElementById('userNameDisplay');
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');

            if (user) {
                nameDisplay.innerText = "Salam, " + user.displayName;
                loginBtn.style.display = 'none';
                logoutBtn.style.display = 'block';
            } else {
                nameDisplay.innerText = "";
                loginBtn.style.display = 'block';
                logoutBtn.style.display = 'none';
            }
        }

        // --- DATA ---
        const ALLAH_NAMES = [
            ["ÿßŸÑŸÑŸá","Allah"],["ÿßŸÑÿ±ÿ≠ŸÖŸÜ","Ar-Rahman"],["ÿßŸÑÿ±ÿ≠ŸäŸÖ","Ar-Rahim"],["ÿßŸÑŸÖŸÑŸÉ","Al-Malik"],["ÿßŸÑŸÇÿØŸàÿ≥","Al-Quddus"],["ÿßŸÑÿ≥ŸÑÿßŸÖ","As-Salam"],["ÿßŸÑŸÖÿ§ŸÖŸÜ","Al-Mu'min"],["ÿßŸÑŸÖŸáŸäŸÖŸÜ","Al-Muhaymin"],["ÿßŸÑÿπÿ≤Ÿäÿ≤","Al-Aziz"],["ÿßŸÑÿ¨ÿ®ÿßÿ±","Al-Jabbar"],["ÿßŸÑŸÖÿ™ŸÉÿ®ÿ±","Al-Mutakabbir"],["ÿßŸÑÿÆÿßŸÑŸÇ","Al-Khaliq"],["ÿßŸÑÿ®ÿßÿ±ÿ¶","Al-Bari"],["ÿßŸÑŸÖÿµŸàÿ±","Al-Musawwir"],["ÿßŸÑÿ∫ŸÅÿßÿ±","Al-Ghaffar"],["ÿßŸÑŸÇŸáÿßÿ±","Al-Qahhar"],["ÿßŸÑŸàŸáÿßÿ®","Al-Wahhab"],["ÿßŸÑÿ±ÿ≤ÿßŸÇ","Ar-Razzaq"],["ÿßŸÑŸÅÿ™ÿßÿ≠","Al-Fattah"],["ÿßŸÑÿπŸÑŸäŸÖ","Al-Alim"],
            ["ÿßŸÑŸÇÿßÿ®ÿ∂","Al-Qabid"],["ÿßŸÑÿ®ÿßÿ≥ÿ∑","Al-Basit"],["ÿßŸÑÿÆÿßŸÅÿ∂","Al-Khafid"],["ÿßŸÑÿ±ÿßŸÅÿπ","Ar-Rafi"],["ÿßŸÑŸÖÿπÿ≤","Al-Mu'izz"],["ÿßŸÑŸÖÿ∞ŸÑ","Al-Mudhill"],["ÿßŸÑÿ≥ŸÖŸäÿπ","As-Sami"],["ÿßŸÑÿ®ÿµŸäÿ±","Al-Basir"],["ÿßŸÑÿ≠ŸÉŸäŸÖ","Al-Hakim"],["ÿßŸÑÿπÿØŸÑ","Al-Adl"],["ÿßŸÑŸÑÿ∑ŸäŸÅ","Al-Latif"],["ÿßŸÑÿÆÿ®Ÿäÿ±","Al-Khabir"],["ÿßŸÑÿ≠ŸÑŸäŸÖ","Al-Halim"],["ÿßŸÑÿπÿ∏ŸäŸÖ","Al-Azim"],["ÿßŸÑÿ∫ŸÅŸàÿ±","Al-Ghafoor"],["ÿßŸÑÿ¥ŸÉŸàÿ±","Ash-Shakur"],["ÿßŸÑÿπŸÑŸä","Al-Ali"],["ÿßŸÑŸÉÿ®Ÿäÿ±","Al-Kabir"],["ÿßŸÑÿ≠ŸÅŸäÿ∏","Al-Hafiz"],["ÿßŸÑŸÖŸÇŸäÿ™","Al-Muqit"],
            ["ÿßŸÑÿ≠ÿ≥Ÿäÿ®","Al-Hasib"],["ÿßŸÑÿ¨ŸÑŸäŸÑ","Al-Jalil"],["ÿßŸÑŸÉÿ±ŸäŸÖ","Al-Karim"],["ÿßŸÑÿ±ŸÇŸäÿ®","Ar-Raqib"],["ÿßŸÑŸÖÿ¨Ÿäÿ®","Al-Mujib"],["ÿßŸÑŸàÿßÿ≥ÿπ","Al-Wasi"],["ÿßŸÑÿ≠ŸÉŸäŸÖ","Al-Hakim"],["ÿßŸÑŸàÿØŸàÿØ","Al-Wadud"],["ÿßŸÑŸÖÿ¨ŸäÿØ","Al-Majid"],["ÿßŸÑÿ®ÿßÿπÿ´","Al-Ba'ith"],["ÿßŸÑÿ¥ŸáŸäÿØ","Ash-Shahid"],["ÿßŸÑÿ≠ŸÇ","Al-Haqq"],["ÿßŸÑŸàŸÉŸäŸÑ","Al-Wakil"],["ÿßŸÑŸÇŸàŸä","Al-Qawiyy"],["ÿßŸÑŸÖÿ™ŸäŸÜ","Al-Matin"],["ÿßŸÑŸàŸÑŸä","Al-Wali"],["ÿßŸÑÿ≠ŸÖŸäÿØ","Al-Hamid"],["ÿßŸÑŸÖÿ≠ÿµŸä","Al-Muhsi"],["ÿßŸÑŸÖÿ®ÿØÿ¶","Al-Mubdi"],["ÿßŸÑŸÖÿπŸäÿØ","Al-Mu'id"],
            ["ÿßŸÑŸÖÿ≠ŸäŸä","Al-Muhyi"],["ÿßŸÑŸÖŸÖŸäÿ™","Al-Mumit"],["ÿßŸÑÿ≠Ÿä","Al-Hayy"],["ÿßŸÑŸÇŸäŸàŸÖ","Al-Qayyum"],["ÿßŸÑŸàÿßÿ¨ÿØ","Al-Wajid"],["ÿßŸÑŸÖÿßÿ¨ÿØ","Al-Majid"],["ÿßŸÑŸàÿßÿ≠ÿØ","Al-Wahid"],["ÿßŸÑÿ£ÿ≠ÿØ","Al-Ahad"],["ÿßŸÑÿµŸÖÿØ","As-Samad"],["ÿßŸÑŸÇÿßÿØÿ±","Al-Qadir"],["ÿßŸÑŸÖŸÇÿ™ÿØÿ±","Al-Muqtadir"],["ÿßŸÑŸÖŸÇÿØŸÖ","Al-Muqaddim"],["ÿßŸÑŸÖÿ§ÿÆÿ±","Al-Mu'akhkhir"],["ÿßŸÑÿ£ŸàŸÑ","Al-Awwal"],["ÿßŸÑÿ¢ÿÆÿ±","Al-Akhir"],["ÿßŸÑÿ∏ÿßŸáÿ±","Az-Zahir"],["ÿßŸÑÿ®ÿßÿ∑ŸÜ","Al-Batin"],["ÿßŸÑŸàÿßŸÑŸä","Al-Wali"],["ÿßŸÑŸÖÿ™ÿπÿßŸÑŸä","Al-Muta'ali"],["ÿßŸÑÿ®ÿ±","Al-Barr"],
            ["ÿßŸÑÿ™Ÿàÿßÿ®","At-Tawwab"],["ÿßŸÑŸÖŸÜÿ™ŸÇŸÖ","Al-Muntaqim"],["ÿßŸÑÿπŸÅŸà","Al-Afu"],["ÿßŸÑÿ±ÿ§ŸàŸÅ","Ar-Ra'uf"],["ŸÖÿßŸÑŸÉ ÿßŸÑŸÖŸÑŸÉ","Malik-ul-Mulk"],["ÿ∞Ÿà ÿßŸÑÿ¨ŸÑÿßŸÑ ŸàÿßŸÑÿ•ŸÉÿ±ÿßŸÖ","Zul-Jalal-wal-Ikram"],["ÿßŸÑŸÖŸÇÿ≥ÿ∑","Al-Muqsit"],["ÿßŸÑÿ¨ÿßŸÖÿπ","Al-Jami"],["ÿßŸÑÿ∫ŸÜŸä","Al-Ghani"],["ÿßŸÑŸÖÿ∫ŸÜŸä","Al-Mughni"],["ÿßŸÑŸÖÿßŸÜÿπ","Al-Mani"],["ÿßŸÑÿ∂ÿßÿ±","Ad-Darr"],["ÿßŸÑŸÜÿßŸÅÿπ","An-Nafi"],["ÿßŸÑŸÜŸàÿ±","An-Nur"],["ÿßŸÑŸáÿßÿØŸä","Al-Hadi"],["ÿßŸÑÿ®ÿØŸäÿπ","Al-Badi"],["ÿßŸÑÿ®ÿßŸÇŸä","Al-Baqi"],["ÿßŸÑŸàÿßÿ±ÿ´","Al-Warith"],["ÿßŸÑÿ±ÿ¥ŸäÿØ","Ar-Rashid"],["ÿßŸÑÿµÿ®Ÿàÿ±","As-Sabur"]
        ];

        const WISDOMS = [
            "Actions are judged by intentions.", "The best of you are those who learn the Quran and teach it.", "Patience is a pillar of faith.", "Kindness is a mark of faith.", "Speak a good word or remain silent.", "A smile is charity.", "Cleanliness is half of faith.", "Paradise lies at the feet of mothers.", "Do not get angry.", "God is with the patient.",
            "Trust in Allah, but tie your camel.", "The strong man is not the wrestler, but the one who controls his anger.", "Feed the hungry and visit the sick.", "Save yourself from Hellfire even with half a date.", "Richness is not having many possessions, but richness of soul.", "None of you truly believes until he loves for his brother what he loves for himself.", "Seek knowledge from the cradle to the grave.", "The ink of the scholar is more holy than the blood of the martyr.", "He who does not thank people, does not thank Allah.", "Allah is beautiful and loves beauty.",
            "Modesty brings nothing but good.", "The world is a prison for the believer and a paradise for the disbeliever.", "Be in this world as if you were a stranger.", "Take advantage of five before five: your youth before old age...", "Giving charity does not decrease wealth.", "Fear Allah wherever you are.", "Follow a bad deed with a good deed.", "The most beloved deed to Allah is the most regular and constant.", "Gentleness adorns everything.", "Oppression will be darkness on the Day of Judgment.",
            "A good word is a charity.", "Every act of kindness is charity.", "Do not spy on one another.", "Do not backbite one another.", "The believer is not a slanderer.", "Allah helps the servant as long as the servant helps his brother.", "Whoever believes in Allah and the Last Day should honor his guest.", "Making peace between two people is charity.", "Removing a harmful object from the road is charity.", "Cheerfulness towards your brother is charity.",
            "The best of people are those most beneficial to others.", "Seek forgiveness, for Allah is Forgiving.", "Mercy is only removed from a miserable person.", "Allah is Gentle and loves gentleness.", "Do not waste water even if you were at a running stream.", "Pay the worker his wages before his sweat dries.", "Avoid suspicion.", "Jealousy eats away at good deeds like fire eats wood.", "The upper hand is better than the lower hand.", "A father gives his child nothing better than good manners.",
            "There is no disease that Allah has created, except that He also has created its treatment.", "Supplication is the essence of worship.", "The key to Paradise is prayer.", "The key to prayer is purification.", "Truthfulness leads to righteousness.", "Lying leads to wickedness.", "A hypocrite has three signs: when he speaks he lies...", "Do not sever ties of kinship.", "Treat your neighbors well.", "Respect your elders and have mercy on the young.",
            "Allah does not look at your appearance, but at your hearts.", "Your body has a right over you.", "Your family has a right over you.", "Give gifts, you will love one another.", "The best Jihad is a word of truth before a tyrant ruler.", "Knowledge is light.", "Ignorance is darkness.", "With hardship comes ease.", "Indeed, Allah is with those who fear Him.", "My mercy encompasses all things.",
            "Call upon Me; I will respond to you.", "Establish prayer for My remembrance.", "Read in the name of your Lord.", "And speak to people good words.", "Do not walk on the earth arrogantly.", "Lower your voice.", "Be grateful to Me and do not deny Me.", "Indeed, prayer prohibits immorality and wrongdoing.", "Hold firmly to the rope of Allah.", "And consult them in the matter.",
            "Forgive and overlook.", "Repel evil with that which is better.", "Allah loves the doers of good.", "Allah loves the patient.", "Allah loves those who trust in Him.", "Allah loves the just.", "Allah loves the purifyers.", "Allah does not love the aggressors.", "Allah does not love the arrogant.", "Allah is the Light of the heavens and the earth.",
            "To Allah belongs the east and the west.", "Wherever you turn, there is the Face of Allah.", "He is the First and the Last.", "He is with you wherever you are.", "Sufficient for us is Allah.", "Upon Allah let the believers rely.", "If you are grateful, I will surely increase you.", "My Lord, increase me in knowledge.", "Our Lord, give us in this world good.", "Peace be upon you."
        ];

        // --- CORE LOGIC ---
        function runTimers() {
            const now = new Date();
            const ramadan = new Date("February 18, 2026 00:00:00").getTime();
            const diff = ramadan - now.getTime();
            document.getElementById("ramadanTimer").innerText = Math.floor(diff/(1000*60*60*24)) + "d " + Math.floor((diff%(1000*60*60*24))/(1000*60*60)) + "h";
            
            let dToF = (5 - now.getDay() + 7) % 7;
            document.getElementById("jummahTimer").innerText = dToF === 0 ? "Today" : dToF + " Days";
        }
        setInterval(runTimers, 60000); runTimers();

        // --- ENHANCED SHAHIN AI & MALE VOICE ---
        const synth = window.speechSynthesis;
        let maleVoice = null;

        // Ensure voices are loaded and select a Male one
        function loadVoices() {
            const voices = synth.getVoices();
            // Try to find a voice with "Male" or specific names like "David", "Daniel"
            maleVoice = voices.find(v => v.name.includes('Male') || v.name.includes('David') || v.name.includes('Daniel') || v.name.includes('Google US English'));
            if(!maleVoice && voices.length > 0) maleVoice = voices[0]; // Fallback
        }
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        function aiResponse(text) {
            const status = document.getElementById('ai-status');
            status.style.display = 'block';
            status.innerHTML = `<span style="color:var(--ai-green); font-size:0.7rem;">SHAHIN AI IS SPEAKING...</span><br>${text}`;
            
            // Stop any previous speech
            synth.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            if (maleVoice) utterance.voice = maleVoice;
            utterance.pitch = 0.9; // Slightly deeper for male effect
            utterance.rate = 1;
            
            synth.speak(utterance);
            // Hide status after speech (rough estimate: 100ms per character)
            setTimeout(() => status.style.display = 'none', Math.max(4000, text.length * 80));
        }

        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'en-US';

        function startVoiceAI() {
            const status = document.getElementById('ai-status');
            status.style.display = 'block'; 
            status.innerText = "Listening... Ask me about Islam, Salah, Prophets, or Say 'Open Quiz'.";
            
            try {
                recognition.start();
            } catch(e) {
                console.log("Mic already active or not supported");
            }
        }

        recognition.onresult = (e) => {
            const cmd = e.results[0][0].transcript.toLowerCase();
            const status = document.getElementById('ai-status');
            status.innerHTML = `You said: "${cmd}"`;

            // ISLAMIC KNOWLEDGE BASE (Simulation)
            if(cmd.includes("surah") || cmd.includes("quran")) { 
                aiResponse("Opening the Holy Quran player for you."); openSurahs(); 
            }
            else if(cmd.includes("quiz")) { 
                aiResponse("Starting the Islamic quiz. Let's test your knowledge!"); openQuiz(); 
            }
            else if(cmd.includes("who are you")) { 
                aiResponse("I am Shahin AI, the digital companion for the Ummah, created by Shahin Aktar."); 
            }
            // --- Expanded Islamic Q&A ---
            else if(cmd.includes("allah")) { aiResponse("Allah is the One and Only God, the Creator and Sustainer of the universe."); }
            else if(cmd.includes("prophet") || cmd.includes("muhammad")) { aiResponse("Prophet Muhammad (PBUH) is the last messenger of Allah and the seal of the prophets."); }
            else if(cmd.includes("pillar")) { aiResponse("The five pillars of Islam are: Shahada (Faith), Salah (Prayer), Zakat (Charity), Sawm (Fasting), and Hajj (Pilgrimage)."); }
            else if(cmd.includes("salah") || cmd.includes("prayer")) { aiResponse("Salah is the second pillar of Islam. Muslims pray five times a day: Fajr, Dhuhr, Asr, Maghrib, and Isha."); }
            else if(cmd.includes("zakat") || cmd.includes("charity")) { aiResponse("Zakat is the third pillar, requiring Muslims to give 2.5% of their qualifying wealth to the poor."); }
            else if(cmd.includes("ramadan") || cmd.includes("fasting")) { aiResponse("Ramadan is the 9th month of the Hijri calendar, where fasting is obligatory from dawn to sunset."); }
            else if(cmd.includes("hajj")) { aiResponse("Hajj is the pilgrimage to Mecca that every able-bodied Muslim must perform at least once."); }
            else if(cmd.includes("quran book")) { aiResponse("The Quran is the holy book of Islam, revealed to Prophet Muhammad (PBUH) by Angel Jibreel."); }
            else if(cmd.includes("wudu") || cmd.includes("ablution")) { aiResponse("Wudu is the ritual washing performed before prayer. It involves washing the face, hands, head, and feet."); }
            else if(cmd.includes("hijab")) { aiResponse("Hijab is a veil worn by Muslim women in the presence of males outside of their immediate family, representing modesty."); }
            else if(cmd.includes("greeting")) { aiResponse("The Islamic greeting is 'As-salamu alaykum', meaning 'Peace be upon you'."); }
            else { 
                aiResponse("I heard: " + cmd + ". My knowledge is growing. Try asking about the 5 Pillars, Prophets, or say 'Open Quran'."); 
            }
        };

        recognition.onerror = (e) => {
            document.getElementById('ai-status').innerText = "Error: Could not hear you. Check microphone.";
        };

        window.onload = () => {
            loadVoices(); // Load voices immediately
            checkDailyReset();

            // Fill 99 Names
            const nGrid = document.getElementById('namesGrid');
            ALLAH_NAMES.forEach(pair => {
                nGrid.innerHTML += `<div class="name-box"><span class="ar">${pair[0]}</span><span class="en">${pair[1]}</span></div>`;
            });

            // Fill 100 Unique Wisdoms
            const qList = document.getElementById('quoteList');
            WISDOMS.forEach((txt, i) => {
                qList.innerHTML += `<div class="q-card"><p>"${txt}"</p><span>Verse/Wisdom #${i+1}</span></div>`;
            });

            // Surahs - Expanded to 50
            const surahs = [
                "Al-Fatiha", "Al-Baqarah", "Al-Imran", "An-Nisa", "Al-Ma'idah", "Al-An'am", "Al-A'raf", "Al-Anfal", "At-Tawbah", "Yunus",
                "Hud", "Yusuf", "Ar-Ra'd", "Ibrahim", "Al-Hijr", "An-Nahl", "Al-Isra", "Al-Kahf", "Maryam", "Ta-Ha",
                "Al-Anbiya", "Al-Hajj", "Al-Mu'minun", "An-Nur", "Al-Furqan", "Ash-Shu'ara", "An-Naml", "Al-Qasas", "Al-Ankabut", "Ar-Rum",
                "Luqman", "As-Sajdah", "Al-Ahzab", "Saba", "Fatir", "Ya-Sin", "As-Saffat", "Sad", "Az-Zumar", "Ghafir",
                "Fussilat", "Ash-Shura", "Az-Zukhruf", "Ad-Dukhan", "Al-Jathiyah", "Al-Ahqaf", "Muhammad", "Al-Fath", "Al-Hujurat", "Qaf"
            ];
            
            const sList = document.getElementById('surahList');
            surahs.forEach((name, i) => {
                sList.innerHTML += `<div class="surah-card"><b>${i+1}. ${name}</b><audio controls src="https://server8.mp3quran.net/afs/${(i+1).toString().padStart(3,'0')}.mp3"></audio></div>`;
            });
        };

        // --- APP STATE & DAILY LOGIC ---
        let appData = JSON.parse(localStorage.getItem('alsa_db')) || { coins: 0, date: "", claimed: [] };
        document.getElementById('coinCount').innerText = appData.coins;

        function checkDailyReset() {
            const today = new Date().toDateString();
            if (appData.date !== today) {
                appData.date = today;
                appData.claimed = []; 
                save();
            }
            appData.claimed.forEach(id => {
                const btn = document.getElementById('btn-' + id);
                if(btn) btn.classList.add('done');
            });
        }

        function toggleMenu() { const m = document.getElementById('fullMenu'); m.style.display = m.style.display === 'flex' ? 'none' : 'flex'; }
        function openSurahs() { toggleMenu(); document.getElementById('surahPanel').style.display = 'flex'; }
        function closeSurahs() { document.getElementById('surahPanel').style.display = 'none'; }
        function openQuiz() { toggleMenu(); document.getElementById('quizPanel').style.display = 'flex'; nextQ(); }
        function closeQuiz() { document.getElementById('quizPanel').style.display = 'none'; }

        // --- 50 UNIQUE ISLAMIC QUIZ QUESTIONS ---
        const QUIZ_DATA = [
            {q:"Who is the first Prophet in Islam?", a:["Adam (AS)","Nuh (AS)","Musa (AS)"], c:0},
            {q:"What is the holy book of Muslims?", a:["Torah","Bible","Quran"], c:2},
            {q:"How many prayers are obligatory daily?", a:["3","5","7"], c:1},
            {q:"Which month do Muslims fast in?", a:["Shawwal","Ramadan","Muharram"], c:1},
            {q:"Where is the Kaaba located?", a:["Madinah","Jerusalem","Mecca"], c:2},
            {q:"Who was the last Prophet?", a:["Isa (AS)","Muhammad (PBUH)","Ibrahim (AS)"], c:1},
            {q:"What is the first pillar of Islam?", a:["Salah","Shahada","Zakat"], c:1},
            {q:"Which angel brought the revelation?", a:["Mikael","Israfil","Jibreel"], c:2},
            {q:"Which Surah is the Heart of the Quran?", a:["Al-Fatiha","Ya-Sin","Al-Baqarah"], c:1},
            {q:"How many surahs are in the Quran?", a:["114","110","120"], c:0},
            {q:"What is the night of power called?", a:["Laylatul Qadr","Laylatul Miraj","Laylatul Raghaib"], c:0},
            {q:"Which prophet built the Ark?", a:["Nuh (AS)","Hud (AS)","Salih (AS)"], c:0},
            {q:"Which prophet was swallowed by a whale?", a:["Yusuf (AS)","Yunus (AS)","Musa (AS)"], c:1},
            {q:"What is the washing before prayer called?", a:["Ghusl","Tayammum","Wudu"], c:2},
            {q:"Which prayer has no Ruku or Sujood?", a:["Janazah","Eid","Taraweeh"], c:0},
            {q:"Who was the first Caliph?", a:["Umar (RA)","Ali (RA)","Abu Bakr (RA)"], c:2},
            {q:"Which prophet spoke as a baby?", a:["Isa (AS)","Yahya (AS)","Musa (AS)"], c:0},
            {q:"What is the direction of prayer?", a:["Qibla","East","West"], c:0},
            {q:"Which Surah has no Bismillah?", a:["Al-Anfal","At-Tawbah","Yunus"], c:1},
            {q:"What is the minor pilgrimage called?", a:["Hajj","Ziyarah","Umrah"], c:2},
            {q:"Which Prophet is called Khalilullah?", a:["Musa (AS)","Ibrahim (AS)","Isa (AS)"], c:1},
            {q:"Where did the Prophet (PBUH) migrate to?", a:["Taif","Madinah","Abyssinia"], c:1},
            {q:"What is the charity given yearly called?", a:["Sadaqah","Zakat","Waqf"], c:1},
            {q:"How many gates does Jannah have?", a:["7","8","9"], c:1},
            {q:"Which wife of the Prophet was a businesswoman?", a:["Aisha (RA)","Khadijah (RA)","Hafsa (RA)"], c:1},
            {q:"Which battle was the first in Islam?", a:["Uhud","Khandaq","Badr"], c:2},
            {q:"Which prayer is at dawn?", a:["Fajr","Dhuhr","Isha"], c:0},
            {q:"Which prayer is at sunset?", a:["Asr","Maghrib","Isha"], c:1},
            {q:"Who is the Angel of Death?", a:["Malik","Azrael","Ridwan"], c:1},
            {q:"What is the food for breaking fast called?", a:["Suhoor","Iftar","Dinner"], c:1},
            {q:"Which surah equals 1/3 of Quran?", a:["Al-Ikhlas","Al-Falaq","An-Nas"], c:0},
            {q:"Who built the Kaaba originally?", a:["Adam (AS)","Ibrahim (AS)","Nuh (AS)"], c:0},
            {q:"Which prophet could control wind?", a:["Sulaiman (AS)","Dawud (AS)","Musa (AS)"], c:0},
            {q:"Which prophet was thrown in fire?", a:["Yusuf (AS)","Ibrahim (AS)","Lut (AS)"], c:1},
            {q:"What is the bridge over Hellfire called?", a:["Sirat","Barzakh","Arafat"], c:0},
            {q:"Who is the keeper of Paradise?", a:["Malik","Ridwan","Munkar"], c:1},
            {q:"Who is the keeper of Hellfire?", a:["Malik","Ridwan","Nakir"], c:0},
            {q:"Which prophet had the most patience?", a:["Ayyub (AS)","Yaqub (AS)","Yusuf (AS)"], c:0},
            {q:"What is the dry ablution called?", a:["Wudu","Ghusl","Tayammum"], c:2},
            {q:"Which prophet was a king?", a:["Sulaiman (AS)","Isa (AS)","Idris (AS)"], c:0},
            {q:"Which bird spoke to Sulaiman (AS)?", a:["Crow","Hoopoe (Hudhud)","Eagle"], c:1},
            {q:"Who was the first martyr in Islam?", a:["Sumayyah (RA)","Hamza (RA)","Bilal (RA)"], c:0},
            {q:"Which prayer is performed on Friday?", a:["Jummah","Eid","Taraweeh"], c:0},
            {q:"How many years did the revelation take?", a:["10","13","23"], c:2},
            {q:"Which Prophet split the sea?", a:["Musa (AS)","Isa (AS)","Nuh (AS)"], c:0},
            {q:"Which Prophet split the moon?", a:["Musa (AS)","Muhammad (PBUH)","Ibrahim (AS)"], c:1},
            {q:"Who is the mother of Isa (AS)?", a:["Maryam (AS)","Asiya (AS)","Hajar (AS)"], c:0},
            {q:"Which animal accompanied the Sleepers of Cave?", a:["Cat","Dog","Horse"], c:1},
            {q:"What is the sin that is not forgiven?", a:["Shirk","Theft","Lying"], c:0},
            {q:"What is the holiest city?", a:["Mecca","Madinah","Jerusalem"], c:0}
        ];

        function nextQ() {
            const q = QUIZ_DATA[Math.floor(Math.random()*QUIZ_DATA.length)];
            document.getElementById('questionText').innerText = q.q;
            document.getElementById('optionsContainer').innerHTML = q.a.map((opt,i)=>`<button class="mission-btn" style="background:rgba(255,255,255,0.1); color:white; border:1px solid rgba(255,255,255,0.3);" onclick="ans(${i},${q.c},this)">${opt}</button>`).join('');
        }

        function ans(i,c,btn) {
            if(i===c) { btn.style.background="#34c759"; appData.coins+=5; save(); setTimeout(nextQ, 800); }
            else btn.style.background="#ff3b30";
        }

        function complete(btn, prayerId) { 
            if(appData.claimed.includes(prayerId)) return;
            btn.classList.add('done'); 
            appData.coins += 10; 
            appData.claimed.push(prayerId);
            save(); 
        }

        function save() { 
            document.getElementById('coinCount').innerText = appData.coins; 
            localStorage.setItem('alsa_db', JSON.stringify(appData)); 
        }
    </script>
</body>
</html>
